<!DOCTYPE html>
<html>
<head>
    <title>DJ.add Demo</title>
    <script src="core.js.ashx" type="text/javascript"></script>
</head>
<body>
    <div id="portalHeadlinesContainer"></div>
    
    <script type="text/javascript">
        DJ.add("PortalHeadlineList", {
            container: "portalHeadlinesContainer",
            options: {
                maxNumHeadlinesToShow: 6,
                showAuthor: true,
                authorClickable: true,
                displaySnippets: 1
            },
            data: { resultSet: getSampleHeadlines() }
        });

        // bootstrapper function to bind data to the component
        function init() {
            
            var $container = $('#portalHeadlinesContainer'),
            component = $container.findComponent(DJ.UI.PortalHeadlineList);

            if (component) {
                //component.bindOnSuccess(data);  // data is a JSON representation of PortalHeadlineListDataResult
                alert("Successfully loaded PortalHeadlineList");
            }
        }
        
        function getSampleHeadlines() {
            var data = {
                "count": {
                    "exp": 0,
                    "isPositive": true,
                    "rawText": {
                        "Value": "8"
                    },
                    "text": {
                        "Value": "8"
                    },
                    "value": 8
                },
                "headlines": [
                  {
                      "authors": [
                        "By Carolyn Cui "
                      ],
                      "baseLanguage": "en",
                      "baseLanguageDescriptor": "English",
                      "codedAuthors": [
                        {
                            "items": [
                              {
                                  "entityType": 0,
                                  "entityTypeDescriptor": "Textual",
                                  "guid": null,
                                  "value": "By Carolyn Cui"
                              }
                            ]
                        }
                      ],
                      "contentCategoryDescriptor": "publication",
                      "contentSubCategoryDescriptor": "article",
                      "hasPublicationTime": false,
                      "headlineUrl": null,
                      "mediaLength": null,
                      "modificationDateDescriptor": "21 June 2012",
                      "modificationDateTime": "/Date(1340280969000)/",
                      "modificationDateTimeDescriptor": "21 June 2012 12:16 GMT",
                      "modificationTimeDescriptor": "12:16 GMT",
                      "publicationDateDescriptor": null,
                      "publicationDateTime": "/Date(1340236800000)/",
                      "publicationDateTimeDescriptor": "21 June 2012",
                      "publicationTimeDescriptor": null,
                      "reference": {
                          "contentCategory": 2,
                          "contentCategoryDescriptor": "publication",
                          "contentSubCategory": 9,
                          "contentSubCategoryDescriptor": "article",
                          "externalUri": null,
                          "guid": "J000000020120621e86l0003f",
                          "imageType": null,
                          "mimetype": "text/xml",
                          "ref": null,
                          "subType": null,
                          "type": "accessionNo"
                      },
                      "snippets": [
                        "Europe and Syria took center stage at the Group of 20 meeting in Los Cabos, Mexico, this week. But in the oil industry, all eyes were on a report that signaled regulators are backing away from efforts to ratchet up scrutiny of the $2 ... "
                      ],
                      "sourceCode": "j",
                      "sourceDescriptor": "The Wall Street Journal",
                      "thumbnailImage": {
                          "guid": null,
                          "src": null,
                          "uri": null
                      },
                      "title": "Regulators Back Off Tougher Curbs on Oil ",
                      "toolTip": null,
                      "truncatedTitle": "Regulators Back Off Tougher Curbs on Oil",
                      "wordCount": {
                          "displayText": {
                              "value": "962"
                          },
                          "value": 962
                      },
                      "wordCountDescriptor": "962 words"
                  }
                ]
            };
            
            return data;
        }
    </script>
</body>
</html>
