/*
* jQuery JSONP Core Plugin 2.1.4 (2010-11-17)
* 
* http://code.google.com/p/jquery-jsonp/
*
* Copyright (c) 2010 Julian Aubourg
*
* This document is licensed as free software under the terms of the
* MIT License: http://www.opensource.org/licenses/mit-license.php
*/
(function(a,m){function j(){}function f(C){i=[C]}function b(C){g.insertBefore(C,g.firstChild)}function d(C,D,E){return C&&C.apply(D.context||D,E)}function l(C){return/\?/.test(C)?"&":"?"}var n="async",o="charset",p="",q="error",r="_jqjsp",s="on",t=s+"click",u=s+q,v=s+"load",w=s+"readystatechange",x="removeChild",y="<script/>",z="success",A="timeout",c=a.browser,g=a("head")[0]||document.documentElement,k={},e=0,i,B={callback:r,url:location.href};function h(R){R=a.extend({},B,R);var G=R.complete,I=R.dataFilter,D=R.callbackParameter,O=R.callback,C=R.cache,N=R.pageCache,E=R.charset,Q=R.url,H=R.data,P=R.timeout,M,J=0,F=j;R.abort=function(){!J++&&F()};if(d(R.beforeSend,R,[R])===false||J){return R}Q=Q||p;H=H?((typeof H)=="string"?H:a.param(H,R.traditional)):p;Q+=H?(l(Q)+H):p;D&&(Q+=l(Q)+encodeURIComponent(D)+"=?");!C&&!N&&(Q+=l(Q)+"_"+(new Date()).getTime()+"=");Q=Q.replace(/=\?(&|$)/,"="+O+"$1");function L(S){!J++&&m(function(){F();N&&(k[Q]={s:[S]});I&&(S=I.apply(R,[S]));d(R.success,R,[S,z]);d(G,R,[R,z])},0)}function K(S){!J++&&m(function(){F();N&&S!=A&&(k[Q]=S);d(R.error,R,[R,S]);d(G,R,[R,S])},0)}N&&(M=k[Q])?(M.s?L(M.s[0]):K(M)):m(function(T,U,V){if(!J){V=P>0&&m(function(){K(A)},P);F=function(){V&&clearTimeout(V);T[w]=T[t]=T[v]=T[u]=null;g[x](T);U&&g[x](U)};window[O]=f;T=a(y)[0];T.id=r+e++;if(E){T[o]=E}function S(W){(T[t]||j)();W=i;i=undefined;W?L(W[0]):K(q)}if(c.msie){T.event=t;T.htmlFor=T.id;T[w]=function(){/loaded|complete/.test(T.readyState)&&S()}}else{T[u]=T[v]=S;c.opera?((U=a(y)[0]).text="jQuery('#"+T.id+"')[0]."+u+"()"):T[n]=n}T.src=Q;b(T);U&&b(U)}},0);return R}h.setup=function(C){a.extend(B,C)};a.jsonp=h})(DJ.jQuery,setTimeout);var TRUE=true,FALSE=false,NULL=null,undefined,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement,requestMethod="jsonp",sendRequest;function getSalt(){return Math.ceil(Math.random()*1000000000000)}(function setRequestMethod(){if(DJ.config&&/CORS/i.test(DJ.config.crossDomainTransport)){if(typeof JSON!=="undefined"&&JSON.parse){if(typeof XMLHttpRequest!=="undefined"&&"withCredentials" in new XMLHttpRequest()){requestMethod="xhr-cors"}else{if((/{\s*\[native code\]\s*}/).test(JSON.parse.toString())&&typeof XDomainRequest!=="undefined"){requestMethod="xdr"}}}}})();switch(requestMethod){case"xhr-cors":sendRequest=function(d,a,c){d+="_="+getSalt();var e=new XMLHttpRequest(),b="get";e.open(b,d,true);e.onload=function(f){var g=e.responseText;if(JSON&&JSON.parse&&g){g=JSON.parse(g);a(g,c)}};e.onerror=function(){var f={Error:{Message:"Data request error occurred ("+e.status+")."}};a(f,c)};e.send()};break;case"xdr":sendRequest=function(d,a,c){d+="&_="+getSalt();var e=new XDomainRequest(),b="get";e.open(b,d);e.onload=function(){var f=e.responseText;if(JSON&&JSON.parse&&f){f=JSON.parse(f);a(f,c)}};e.onerror=function(){var f={Error:{Message:"Data request error occurred ("+e.status+")."}};a(f,c)};e.onprogress=function(){};e.ontimeout=function(){};e.send()};break;default:sendRequest=function(b){var a={callbackParameter:"callback",timeout:30*1000};var c=DJ.jQuery.extend({},a,b);DJ.jQuery.jsonp(c)}}DJ.crossDomain=sendRequest;