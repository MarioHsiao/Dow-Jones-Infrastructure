<%
var hasArticle = self.newsletterSections[0].name.trim().length === 0;
var hasNoSection = (self.newsletterSections.length === 1 && hasArticle);
var tokens = this.tokens;
%>
<div class="clearfix nl-pps-instruction">
    <div class="pull-left"><span class="note"><%=tokens.placeSelectedItems%></span></div>
</div>
<ul class="nl-pps-sections">
    <li class="nl-pps-section">
        <div class="clearfix">
            <div class="pull-left"><span class="section-name default"><%=tokens.topOfEdition%></span></div>
            <div class="inline-tools nl-pps-actions pull-right" style="display: block;">
                <a class="btn btn-link add-to-section" href="javascript:void(0);" title="<%=tokens.addActionTooltip%>"
                   data-index="0" data-pi="a">
                    <i class="icon-plus icon-small"></i>
                </a>
            </div>
        </div>
    </li>
    <%if (hasNoSection) {%>
    <li class="nl-pps-section">
        <div class="clearfix">
            <div class="pull-left"><span class="section-name default"><%=tokens.bottomOfEdition%></span></div>
            <div class="inline-tools nl-pps-actions pull-right" style="display: block;">
                <a class="btn btn-link add-to-section" href="javascript:void(0);" title="<%=tokens.addActionTooltip%>"
                   data-index="0" data-pi="p">
                    <i class="icon-plus icon-small"></i>
                </a>
            </div>
        </div>
    </li>
    <% } else {

    for (var i = (hasArticle ? 1 : 0); i < self.newsletterSections.length; i++) {
    x = self.newsletterSections[i];
    %>
    <li class="nl-pps-section">
        <div class="clearfix">
            <div class="pull-left"><span class="section-name"><%=x.name%></span></div>
            <div class="inline-tools nl-pps-actions pull-right" style="display: block;">
                <a class="btn btn-link add-to-section" href="javascript:void(0);" title="<%=tokens.addActionTooltip%>"
                   data-index="<%=x.position%>" data-pi="a">
                    <i class="icon-plus icon-small"></i>
                </a>
            </div>
        </div>
        <%if (x.subSections && x.subSections.length > 0 ) { %>
        <ul class="nl-pps-subsections">
            <%for (var j = 0; j < x.subSections.length; j++) {
            sub = x.subSections[j];    %>
            <li class="nl-pps-section">
                <div class="clearfix">
                    <div class="pull-left">-&nbsp;<span class="section-name subsection"><%=sub.name%></span></div>
                    <div class="inline-tools nl-pps-actions pull-right" style="display: block;">
                        <a class="btn btn-link add-to-section" href="javascript:void(0);" title="<%=tokens.addActionTooltip%>"
                           data-index="<%=x.position%>_<%=sub.position%>" data-pi="a">
                            <i class="icon-plus icon-small"></i>
                        </a>
                    </div>
                </div>
            </li>
            <% } %>
        </ul>
        <% } %>
    </li>
    <% } }%>
</ul>
